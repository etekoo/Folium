<div class="container pt-5">
  <div class="row justify-content-center">

    <div class="col-md-2 pl-0 pr-0 ">
      <%= render 'public/plant_diaries/sidebar' %>
    </div>

    <div class="col-md-8 offset-md-1">

      <!--ユーザー情報-->
      <div class="row border-bottom">
        <div class="col-md-8">
          <h1>マイページ</h1>
        </div>
        <div class="col-md-4">
        　<% if current_user && current_user.id == @user.id %>
          <%= link_to 'プロフィールを編集', edit_user_path(@user), class: 'btn btn-outline-primary' %>
          <% end %>
        </div>
      </div>


      <div class="row">
        <div class="col-md-8">
          <div class="user-info pt-3">
            <div style="width: 100px; height: 100px;">
              <%= image_tag @user.resize_profile_image(100, 100, 'fill'), class: "rounded-circle" %>
            </div>
            <div class="user-info pt-3">
              <p>ユーザー名: <%= @user.name %></p>
              <p>メールアドレス: <%= @user.email %></p>
              <p>自己紹介: <%= @user.introduction %></p>
            </div>
          </div>
        </div>
      </div>



      <!--投稿一覧-->
      <h2 class="">投稿一覧</h2>

      <table class="table table-striped">
        <thead>
          <tr>
            <th>画像</th>
            <th>タイトル</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% @plant_diaries.each_with_index do |plant_diary, index| %>
            <tr class="<%= index.even? ? 'bg-light' : 'bg-white' %>">
              <td>
                <% if plant_diary.image.attached? %>
                  <%= image_tag plant_diary.image, class: "img-thumbnail", style: "max-width: 100px; max-height: 100px;" %>
                <% else %>
                  <%= image_tag 'diary_no_image', size: "100x100", class: "img-thumbnail" %>
                <% end %>
              </td>
              <td><%= link_to plant_diary.title, plant_diary %></td>
              <td>
                <% if current_user && current_user.id == plant_diary.user_id %>
                  <%= link_to '編集', edit_plant_diary_path(plant_diary), class: 'btn btn-primary' %>
                  <%= link_to '削除', plant_diary, method: :delete, data: { confirm: '本当に削除しますか？' }, class: 'btn btn-danger' %>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>


    </div>
  </div>
</div>